# ========================================
# WSO2 Micro Integrator - ICP Configuration Sample
# ========================================

# ----------------------------------------
# New ICP Integration Configuration
# ----------------------------------------
[server]
hostname = "localhost"
# offset  = 10

[user_store]
type = "read_only_ldap"

[keystore.primary]
file_name = "repository/resources/security/wso2carbon.jks"
password = "wso2carbon"
alias = "wso2carbon"
key_password = "wso2carbon"

[truststore]
file_name = "repository/resources/security/client-truststore.jks"
password = "wso2carbon"
alias = "symmetric.key.value"
algorithm = "AES"

[icp_config]
# Enable new ICP integration (set to false to use legacy Dashboard)
enabled = true

# ICP Server Configuration
# Note: Use the ICP base URL without /dashboard/api suffix
icp_url = "https://localhost:9445"

# Runtime Identification
# Unique identifier for this MI runtime instance
# If not specified, will use node_id from dashboard_config or auto-generate UUID
runtime = "mi"

# Environment Classification
# Used to group runtimes by deployment environment
environment = "prod"

# Project Grouping
# Used to group related integration services
project = "sample_project"

# Component Identification
# Specific component or service area within the project
component = "sample_mi_component"

# Heartbeat Configuration
# Interval between heartbeat transmissions (in seconds)
# Default: 5 seconds
heartbeat_interval = 10

# ----------------------------------------
# JWT Authentication Configuration
# ----------------------------------------
# Keystore Configuration
# Path can be relative to $MI_HOME or absolute
jwt_keystore_path = "repository/resources/security/wso2carbon.jks"
jwt_keystore_password = "wso2carbon"
jwt_key_alias = "wso2carbon"
jwt_key_password = "wso2carbon"

# JWT Token Settings
jwt_issuer = "icp-runtime-jwt-issuer"
jwt_audience = "icp-server"
# Token validity in seconds (default: 3600 = 1 hour)
jwt_expiry_seconds = 3600

# ----------------------------------------
# Legacy Dashboard Configuration (Optional)
# Keep this for backward compatibility or fallback
# ----------------------------------------
#[dashboard_config]
#dashboard_url = "https://dashboard-host:9743/dashboard/api/"
#group_id = "default"
#node_id = "node1"
#heartbeat_interval = 5
#management_hostname = "mi-host.example.com"
#management_port = 9154
